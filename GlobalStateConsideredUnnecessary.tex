\documentclass{article}
 
\usepackage{amscd}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{stmaryrd}
\usepackage{mathpartir}
\usepackage{multicol}
\usepackage{enumitem}
\usepackage[section]{placeins} % float barriers
\usepackage{natbib}
\usepackage{xcolor} 
\usepackage{bussproofs} 
\usepackage{diagrams}
\usepackage{tikz}

\usetikzlibrary{cd}
 
\newtheorem{lemma}{Lemma}

%example: \limit{j \in J}{F_j}
\newcommand{\limit}[2]{\underset{\overset{\longleftarrow}{#1}}{\text{lim}}~#2}
\newcommand{\lims}[1]{\underset{\longleftarrow}{\text{lim}}~#1}
\newcommand{\mbf}{\mathbf}


\newcommand{\vrt}[2]{
\pile{
#1 \\
\downarrow \\
#2
}
}

\newcommand{\ddisp}[3]{
\left(
\scriptsize
\begin{tikzcd}
#1 \ar[d, "\footnotesize{#2}"] \\
#3
\end{tikzcd}
\normalsize
\right)
}

\newcommand{\disp}[3]{
\left(
\tiny
\begin{array}{c}
#1 \\
\downarrow\\
#3
\end{array}
\begin{array}{l}
~ \\
#2 \\
~
\end{array}
\normalsize
\right)
}

\newcommand{\dispp}[3]{
\tiny
\begin{tikzcd}
#1 \ar[d, "#2"] \\
#3
\end{tikzcd}
\normalsize
}

\title{Notes for: \emph{Global State Considered Unnecessary} by Uday Reddy}

\begin{document}

\maketitle


\section*{Appendix A: Categorical Details}

In the definition of the $\dagger-$ comonad, the first thing to note is that he is specifying these natural transformations as points in coherence spaces. The notation for the definition of $\mathit{dup}_A$ needs clarification. (At least, I needed clarification when I first saw it.) Each $s_i$ is an element of $| \dagger A |$, and $s_1 \cdots s_n$ is their concatenation, which is also an element of $| \dagger A|$. So he is quantifying over all natural numbers $n$ and all partitions $s_1 \cdots s_n$ of an arbitrary string in $| \dagger A|$.

The function corresponding to the point $\mathit{read}_A$ of 
$\dagger A \multimap A$ is:
$$\mathit{read_A}(S) \doteq \{ a \mid \langle a \rangle \in S \}$$
(It's instructive to consider the above definition in the special case that $S$ is an \emph{active} point of $\dagger A$.)

The function corresponding to the point $\mathit{dup}_A$ of $\dagger A \multimap \dagger \dagger A$ is:
$$\mathit{dup}_A(S) \doteq \{ \langle s_1,\ldots,s_n \rangle \mid n \in \mathbb N, s_1 s_2 \cdots s_n \in S \} $$

I don't think $\dagger -$'s functorial mapping on functions was defined anywhere. Here's my guess: letting $f : A \to B$ be a linear function from coherence space $A$ to coherence space $B$, we obtain a linear function $\dagger f : \dagger A \to \dagger B$ defined as:
$$\dagger f \in (\dagger A \multimap \dagger B) \doteq \{ ( \langle a_1,\ldots,a_n \rangle, \langle b_1, \ldots, b_n \rangle)  \mid (a_1,b_1),\ldots,(a_n,b_n) \in f \}$$
 
\begin{lemma}
$\mathit{read_A} : \dagger A \to A$ is a natural transformation.
\end{lemma}

\begin{proof}
Let $f : A \multimap B$ be a stable linear function between coherence spaces $A$ and $B$. Then,\\~\\
\begin{tabular}{ll}
$(z,b) \in (\mathit{read}_A;f)$ & $\mathit{iff}$ \\
$\exists a \in A.~((z,a) \in \mathit{read}_A \wedge (a,b) \in f) $ & iff \\
$\exists a \in A.~(z = \langle a \rangle \wedge (a,b) \in f)$ & iff \\

$\exists b \in B.~(z,\langle b \rangle) \in \dagger f$ & iff \\
$(z,b) \in (\dagger f;\mathit{read}_b)$ & ~ 
\end{tabular} 
\end{proof}

\begin{lemma}
$\mathit{dup}_A : \dagger A \to \dagger \dagger A$ is a natural transformation. 
\end{lemma}

\begin{proof}
Intuitively we can see that this is true since partitioning and then mapping through $f$ gives us the same results as mapping through $f$ and then partitioning.\\~\\

Let $f : A \to B$ be a stable linear function between coherence spaces $A$ and $B$. Then,\\~\\
\begin{tabular}{ll}
$(s,z) \in (\mathit{dup}_A; \dagger \dagger f)$ & iff \\~\\
 ~ & ~ \\
$s = t_1 \cdots t_m$ and $(\langle t_1, \ldots, t_m \rangle,z) \in \dagger \dagger f$ & iff \\~\\
 ~ & ~ \\
$s = t_1 \cdots t_m$ and $\forall i \in 1..m.~t_i = a_{i1} \cdots a_{i k_i}$ and \\ 
$z = \langle r_i, \ldots, r_m \rangle$ and $\forall i \in 1..m.~r_i = b_{i1} \cdots b_{i k_i}$ and $\forall i j.~(a_{ij}, b_{ij}) \in f$ & iff \\~\\
$(s,z) \in (\dagger f; \mathit{dup}_{B})$
\end{tabular}

\end{proof}

Next we show that the comonad laws hold.

\begin{lemma}
For all coherence spaces $A$, $\mathit{dup}_A;\dagger(\mathit{read}_A) = \mathit{id}_{\dagger A}$.
\end{lemma}

\begin{proof}~\\~\\
I'm going to elide the proof of this, but it's easy to see since the partition of a sequence is only in the domain of the point $\dagger (read_A)$ if it consists solely of singletons.
\end{proof}

\begin{lemma}
For all coherence spaces $A$, $\mathit{dup}_A;\mathit{read}_{\dagger A} = \mathit{id}_{\dagger A}$.
\end{lemma}

\begin{proof}
The only partition of $\langle a_1, \ldots, a_k \rangle$ in the domain of the point $\mathit{read}_{\dagger A}$ is trivial ``non-partition'' with $n=1$: $\langle \langle a_1, \ldots, a_k \rangle \rangle$. 
\end{proof}

\end{document}



